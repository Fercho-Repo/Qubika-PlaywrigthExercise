$(document).ready(function() {

    let tabsCarousel = null;

    $(window).on('load', function() {
        let tabsWrapperWidth = $('.tabs-wrapper').width();
        let tabsItemsWidth = $('.tabs-nav li').toArray().reduce(function(acc, li) {
            return acc + $(li).width();
        }, 0);
        let carouselOn = tabsWrapperWidth <=  tabsItemsWidth;

        if (carouselOn) {
            

            tabsCarousel = new Swiper('.tabs-nav', {
                slidesPerView: "auto",
                speed: 500,
                slideToClickedSlide: true,
                freeMode: true,
                //centeredSlides: true,
                //centeredSlidesBounds: true,
             });
            
            $('.tabs-nav').addClass('carrousel-on');
            $('.tab-content').first().addClass('active');
            $('.tabs-nav li').first().addClass('active');
            $('.swiper-slide').click(function() {
                $('.swiper-slide').removeClass('active');
                $(this).addClass('active');
                var tabIndex = $(this).index();
                $('.tabs-content .tab-content').removeClass("active");
                $('.tabs-content .tab-content').eq(tabIndex).addClass("active");
            });
        } else {
            $('.tabs-nav').removeClass('carrousel-on');
            $('.tabs-nav li').first().addClass('active');
            $('.tab-content').first().addClass('active');
        
            $('.tabs-nav li').click(function() {
                $('.tabs-nav li').removeClass('active');
                $(this).addClass('active');
                var tabIndex = $(this).index();
                $('.tabs-content .tab-content').removeClass("active");
                $('.tabs-content .tab-content').eq(tabIndex).addClass("active");
            });
        }
    });


    $(window).on('resize', function() {
        if (tabsCarousel) {
            tabsCarousel.destroy();
            tabsCarousel = null;
        };
        tabsWrapperWidth = $('.tabs-wrapper').width();
        tabsItemsWidth = $('.tabs-nav li').toArray().reduce(function(acc, li) {
            return acc + $(li).width();
        }, 0);

        carouselOn = tabsWrapperWidth <=  tabsItemsWidth;
    
        if (carouselOn) {
            tabsCarousel = new Swiper('.tabs-nav', {
                slidesPerView: "auto",
                speed: 500,
                slideToClickedSlide: true,
                freeMode: true,
                //centeredSlides: true,
                //centeredSlidesBounds: true,
             });

             $('.tabs-nav').addClass('carrousel-on');
             $('.swiper-slide').click(function() {
                 $('.swiper-slide').removeClass('active');
                 $(this).addClass('active');
                 var tabIndex = $(this).index();
                 $('.tabs-content .tab-content').removeClass("active");
                 $('.tabs-content .tab-content').eq(tabIndex).addClass("active");
             });
        } else {
            $('.tabs-nav').removeClass('carrousel-on');
            $('.tabs-nav li').click(function() {
                $('.tabs-nav li').removeClass('active');
                $(this).addClass('active');
                var tabIndex = $(this).index();
                $('.tabs-content .tab-content').removeClass("active");
                $('.tabs-content .tab-content').eq(tabIndex).addClass("active");
            });
        }
    });
    
});
