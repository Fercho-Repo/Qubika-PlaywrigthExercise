// Main JS
$(document).ready(function(){

  $(".hamburger").on("click",function(){
    $('.menu-expanded-content').removeClass('show');
    $('.main-header .menu-item').removeClass('active');
    $('.main-header').removeClass('hover');
    $(".main-header").toggleClass("menu-open");
  });

  $(".menu-mobile-go-back-button").on("click",function(){
    $('.menu-expanded-content').removeClass('show');
    $('.main-header').removeClass('hover');
  });
  
  function checkAndRunScripts() {
    if ($(window).width() > 1024) {

      // Capabilities Menu Hover
      $('.capabilities-main-menu-button').hover(function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.capabilities-content').addClass('show');
        $(this).addClass("active");
      });

      // Industries Menu Hover
      $('.industries-main-menu-button').hover(function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.industries-content').addClass('show');
        $(this).addClass("active");
      });

      // Impact Studies Menu Hover
      $('.impact-studies-main-menu-button').hover(function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.impact-studies-content').addClass('show');
        $(this).addClass("active");
      });

      // Insights Menu Hover
      $('.insights-main-menu-button').hover(function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.insights-content').addClass('show');
        $(this).addClass("active");
      });

      // About Us Menu Hover
      $('.about-us-main-menu-button').hover(function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.about-us-content').addClass('show');
        $(this).addClass("active");
      });

      // Contact Us Menu Hover
      $('.contact-us-main-menu-button').hover(function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').removeClass('hover');
      });

      $('.main-header').mouseleave(function(){
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').removeClass('hover');
        $('.menu-expanded-content').removeClass('show');
      });
    } else {
      
      $('.capabilities-main-menu-button').off('mouseenter mouseleave').on('click', function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.capabilities-content').addClass('show');
        $(this).addClass("active");
      });

      $('.industries-main-menu-button').off('mouseenter mouseleave').on('click', function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.industries-content').addClass('show');
        $(this).addClass("active");
      });

      $('.impact-studies-main-menu-button').off('mouseenter mouseleave').on('click', function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.impact-studies-content').addClass('show');
        $(this).addClass("active");
      });

      $('.insights-main-menu-button').off('mouseenter mouseleave').on('click', function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.insights-content').addClass('show');
        $(this).addClass("active");
      });

      $('.about-us-main-menu-button').off('mouseenter mouseleave').on('click', function(){
        $('.menu-expanded-content').removeClass('show');
        $('.main-header .menu-item').removeClass('active');
        $('.main-header').addClass('hover');
        $('.about-us-content').addClass('show');
        $(this).addClass("active");
      });

      $('.main-header').off('mouseleave');
    }
  }

  checkAndRunScripts();

  $(window).resize(function(){
    checkAndRunScripts();
  });


  // Fix Header on scroll
  jQuery(window).scroll(function() {    
    var scroll = $(window).scrollTop();

    if (scroll >= 1) {
        jQuery(".main-header").addClass("fixed");
    } else {
        jQuery(".main-header").removeClass("fixed");
    }
  });
  
  // Fix Header after page load
  function fixheader() {     
      var scroll = $(window).scrollTop();

      if (scroll >= 1) {
          jQuery(".main-header").addClass("fixed");
      } else {
          jQuery(".main-header").removeClass("fixed");
      }
  }
  setTimeout(fixheader, 100)

  // Contact Us Modal
  $(".contact-us-modal-open").on("click",function(event){
    event.preventDefault();
    $(".contact-us-modal").addClass("show");
  });

  $(".contact-us-modal-open a").on("click",function(event){
    event.preventDefault();
    $(".contact-us-modal").addClass("show");
  });

    // More links footer
    $(".expand-more-links").on("click",function(event){
      event.preventDefault();
      $(".extra-footer-links").toggleClass("show");
    });  

    // FAQs
    $('.faq-item').click(function() {
      $(this).toggleClass("show");
    });

});

// Show Contact Us modal on a link with #contact-us or #contact-anchor
function addShowClassToContactUsModal() {
  if (window.location.href.includes("#contact-us") || window.location.href.includes("#contact-anchor")) {
    const contactUsModal = document.querySelector(".contact-us-modal");
    if (contactUsModal) {
      contactUsModal.classList.add("show");
    }
  }
}
window.addEventListener("DOMContentLoaded", addShowClassToContactUsModal);

// Delay Reveal for Mouseflow
document.addEventListener('DOMContentLoaded', function () {
  setTimeout(function () {
      const style = document.createElement('style');
      style.type = 'text/css';
      style.innerHTML = `
          /* Reveal animations */
          .reveal {
              position: relative;
              transition: 1s all;
              opacity: 0;
          }
          .reveal.active {
              opacity: 1;
          }
      `;
      document.head.appendChild(style);
  }, 100);
});